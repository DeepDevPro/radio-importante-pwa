files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/99_debug_app.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      echo "=== DEBUG: Checking application deployment ===" >> /var/log/eb-activity.log
      echo "Current directory: $(pwd)" >> /var/log/eb-activity.log
      echo "App directory contents:" >> /var/log/eb-activity.log
      ls -la /var/app/current/ >> /var/log/eb-activity.log
      echo "Checking if app.js exists:" >> /var/log/eb-activity.log
      ls -la /var/app/current/app.js >> /var/log/eb-activity.log
      echo "Checking Node.js process:" >> /var/log/eb-activity.log
      ps aux | grep node >> /var/log/eb-activity.log
      echo "Checking nginx config:" >> /var/log/eb-activity.log
      nginx -t >> /var/log/eb-activity.log 2>&1
      echo "=== END DEBUG ===" >> /var/log/eb-activity.log
